# Installation Guide

## Prerequisite

- Have `Python 3.11` Installed. You can verify if the Python version using

  - Windows `python --version`
  - MacOS/Linux `python3 --version`

    If it failed or you're using an older version, the newer version installer can be found at [Python website](https://www.python.org/downloads/) or you can install using the system package manager

  - Windows
  
    ```shell
    winget install Python.Python.3.11
    ```

  - MacOS

    ```shell
    brew install pyenv
    pyenv install 3.11
    ```

  - Linux follows [Ubuntu Python Installation Guide](https://www.geeksforgeeks.org/how-to-install-python-in-ubuntu/)

## KU Polls Installations

Before installation change the working directory to where you want to install the application.

*Notes: Python will called `python` in Windows and `python3` in Linux/MacOS in this guide will use `python3`

1. Download latest release version of ku-polls from [Github](https://github.com/OmegaOoh/ku-polls/releases)
   - `.zip` for Windows
   - `.tar.gz` for Linux/MacOS
2. Extract the ku-polls file
3. Change directory using into ku-polls directory
   - If ku-polls directory is not on the root directory you can use
    `cd <directory>`, use `cd ..` to go up 1 directory.
4. Create python virtual environment

   ```shell
   python3 -m venv .venv
   ```

5. Activate virtual environment

   ```shell
   .venv/Scripts/Activate
   ```

6. Install the required Python package

    ```shell
    pip install -r requirements.txt
    ```

7. Migrate Database

   ```shell
   python3 manage.py migrate
   ```

8. Load needed data

   ```shell
   python3 manage.py loaddata <path-to-file>
   ```

    - Sample data can be found in the Data directory, which contains polls (Question + Choice), Votes, and Users.
    - If you wish to load [votes](data/votes-v4.json) you need to load `users.json` first.
    - Order of data to load should be [polls](data/polls-v4.json), [users](data/users.json), [votes](data/votes-v4.json)
9. Create env file (use sample.env)
    - Windows `copy sample.env .env`
    - MacOS/Linux `cp sample.env .env`

## Settings Information

- CSS won't load while the server is running without debug enabled
  - If you don't want to turn on DEBUG to True you can run the server with `python3 manage.py runserver --insecure` to have CSS loaded (**NOT RECOMMENDED**)

- You can customize app configuration in `.env` file.
  - SECRET_KEY is a key generated by Django with commands

    ```shell
    python3 manage.py shell -c "from django.core.management import utils; print(utils.get_random_secret_key())"
    ```

  - DEBUG is Boolean to turn on or off
  - ALLOWED_HOSTS host/domain name Django site can serve. Which can be added or modify. Multiple Allowed Hosts is separated by `,` all host need to be surrounded with quotation marks (`'` or `"`). For Example:
      ```
      ALLOWED_HOSTS = 'localhost, 127.0.0.1, www.examples.com'
      ```
    [More information](https://docs.djangoproject.com/en/5.1/ref/settings/#allowed-hosts) on ALLOWED_HOSTS
  - TIME_ZONE is [Timezone](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones) the site will works on.

## Unit Testing

KU polls has an Unit Test which you can run using
```shell
python3 manage.py test polls
```

## After Installation
To run the application you can follows instructions in [README](README.md/#how-to-run)
